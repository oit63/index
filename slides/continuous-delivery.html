<!DOCTYPE html>
<html>
<head>
<!-- 2017-11-28 Tue 02:35 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>Continuous Delivery</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Jichao Ouyang">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                                                    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
                                                                                              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
                                                                                                'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NJRFJGX');</script>
<!-- End Google Tag Manager -->
<link rel="icon" href="/favicon.ico">
<meta name="theme-color" content="#ffffff">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style/pixyll.css"/>
<link rel="alternate" type="application/rss+xml" title="Jichao Ouyang" href="https://feeds.oyanglul.us/JichaoOuyangsBlog"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<!--[if lt IE 9]>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.ie.min.css" />
     <![endif]-->

<script type="text/javascript" src="https://blog.oyanglul.us/js/org-info.js">
/**
 *
 * @source: https://blog.oyanglul.us/js/org-info.js
 *
 * @licstart  The following is the entire license notice for the
 *  JavaScript code in https://blog.oyanglul.us/js/org-info.js.
 *
 * Copyright (C) 2012-2013 Free Software Foundation, Inc.
 *
 *
 * The JavaScript code in this tag is free software: you can
 * redistribute it and/or modify it under the terms of the GNU
 * General Public License (GNU GPL) as published by the Free Software
 * Foundation, either version 3 of the License, or (at your option)
 * any later version.  The code is distributed WITHOUT ANY WARRANTY;
 * without even the implied warranty of MERCHANTABILITY or FITNESS
 * FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.
 *
 * As additional permission under GNU GPL version 3 section 7, you
 * may distribute non-source (e.g., minimized or compacted) forms of
 * that code without the copy of the GNU GPL normally required by
 * section 4, provided you include this license notice and a URL
 * through which recipients can access the Corresponding Source.
 *
 * @licend  The above is the entire license notice
 * for the JavaScript code in https://blog.oyanglul.us/js/org-info.js.
 *
 */
</script>

<script type="text/javascript">

/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/

<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "4");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "1");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "1");
org_html_manager.set("VIEW", "info");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJRFJGX"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<header>
    <a accesskey="h" href="/index.html"> HOME </a> |
    <a href="#" id="edit-in-github">EDIT</a> |
    <a href="https://feeds.oyanglul.us/JichaoOuyangsBlog">RSS</a> |
    <a href="/archive.html">ARCHIVE</a> |
    <a href="/theindex.html">INDEX</a> |
    <a accesskey="H" href="/jichao.ouyang.html">ABOUT</a>
</header>
</div>
<div id="content">
<header>
<h1 class="title">Continuous Delivery</h1>
</header><nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">What is Continuous Delivery</a></li>
<li><a href="#orgheadline2">What is Continuous Integration</a></li>
<li><a href="#orgheadline9">Why Continuous Delivery</a>
<ul>
<li><a href="#orgheadline3">Low risk releases</a></li>
<li><a href="#orgheadline4">Faster time to market</a></li>
<li><a href="#orgheadline5">Higher quality</a></li>
<li><a href="#orgheadline6">Lower Cost</a></li>
<li><a href="#orgheadline7">Better products</a></li>
<li><a href="#orgheadline8">Happier teams</a></li>
</ul>
</li>
<li><a href="#orgheadline10">Why Continuous Integration</a></li>
<li><a href="#orgheadline11">Evolutionary architecture</a></li>
<li><a href="#orgheadline20">Essentials</a>
<ul>
<li><a href="#orgheadline12">Maintain a single-source repository</a></li>
<li><a href="#orgheadline13">Make your build self-testing</a></li>
<li><a href="#orgheadline14">Automate the build</a></li>
<li><a href="#orgheadline15">Fix broken builds immediately</a></li>
<li><a href="#orgheadline16">Keep the build fast</a></li>
<li><a href="#orgheadline17">Test in a clone of the production environment</a></li>
<li><a href="#orgheadline18">Make it easy for anyone to get the latest executable</a></li>
<li><a href="#orgheadline19">Automate deployment</a></li>
</ul>
</li>
<li><a href="#orgheadline23">Pipeline</a>
<ul>
<li><a href="#orgheadline21">Journey from code to product</a></li>
<li><a href="#orgheadline22">Pipeline as Code</a></li>
</ul>
</li>
<li><a href="#orgheadline24">QA in Production</a></li>
<li><a href="#orgheadline25">Popular CI tools</a></li>
<li><a href="#orgheadline26">Homework</a></li>
</ul>
</div>
</nav>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">What is Continuous Delivery</h2>
<div class="outline-text-2" id="text-orgheadline1">
<blockquote>
<p>
<i>Continuous Delivery</i><sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup> is the <b>ability</b> to get changes of all types including new <b>features</b>, configuration <b>changes</b>, bug <b>fixes</b> and <b>experiments</b> into <b>PRODUCTION</b>, or into the hands of users, <b>safely</b> and <b>quickly</b> in a <b>sustainable</b> way.
</p>
</blockquote>
</div>
</div>
<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">What is Continuous Integration</h2>
<div class="outline-text-2" id="text-orgheadline2">
<blockquote>
<p>
<i>Continuous Integration</i><sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> is a software development <b>practice</b> where members of a team <b>integrate</b> their work <b>frequently</b>, usually each person integrates at least daily - leading to multiple integrations per day. Each integration is <b>verified</b> by an <b>automated build</b> (including test) to <b>detect</b> integration <b>errors</b> as <b>quickly</b> as possible.
</p>
</blockquote>
</div>
</div>
<div id="outline-container-orgheadline9" class="outline-2">
<h2 id="orgheadline9">Why Continuous Delivery</h2>
<div class="outline-text-2" id="text-orgheadline9">
</div><div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">Low risk releases</h3>
<div class="outline-text-3" id="text-orgheadline3">

<figure>
<p><img src="https://www.evernote.com/l/ABeIYFLHPiBG-5ExmehzW-_cH1GiX4jVXHYB/image.jpg" alt="image.jpg">
</p>
</figure>

<ul class="org-ul">
<li>release fast</li>
<li>release often</li>
<li>increment</li>
<li>decouple release and deployment</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">Faster time to market</h3>
<div class="outline-text-3" id="text-orgheadline4">

<figure>
<p><img src="https://www.evernote.com/l/ABeA0Sr5KGdNTLBperhbcqTtN5dwR0XulVQB/image.png" alt="image.png">
</p>
</figure>

<ul class="org-ul">
<li>no manual regressions</li>
<li>avoid the large amounts of re-work</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">Higher quality</h3>
<div class="outline-text-3" id="text-orgheadline5">
<ul class="org-ul">
<li>discover <b>regressions</b> within minutes</li>
<li>teams are freed to <b>focus</b> on <b>higher level</b> exploratory testing, usability testing, performance and security testing</li>
<li>ensuring quality is built in to products and services from the beginning</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">Lower Cost</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
Any successful software product or service will evolve significantly over the course of its lifetime.
</p>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7">Better products</h3>
<div class="outline-text-3" id="text-orgheadline7">

<figure>
<p><img src="https://www.evernote.com/l/ABe34B0bA6ZNy7zzN3smjKTa-Fp6JxG9KnwB/image.png" alt="image.png">
</p>
</figure>

<ul class="org-ul">
<li>shorten feedback cycle</li>
<li>avoid features we build that deliver zero value</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8">Happier teams</h3>
<div class="outline-text-3" id="text-orgheadline8">

<figure>
<p><img src="https://blog.oyanglul.us/javascript/images/conga.jpg" alt="conga.jpg">
</p>
</figure>
</div>
</div>
</div>
<div id="outline-container-orgheadline10" class="outline-2">
<h2 id="orgheadline10">Why Continuous Integration</h2>
<div class="outline-text-2" id="text-orgheadline10">
<div class="org-center">
<p>
Same reason as <a href="#orgheadline9">Why Continuous Delivery</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="orgheadline11">Evolutionary architecture</h2>
<div class="outline-text-2" id="text-orgheadline11">

<figure>
<p><img src="https://continuousdelivery.com/images/strangler.png" alt="strangler.png">
</p>
</figure>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-2">
<h2 id="orgheadline20">Essentials<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup></h2>
<div class="outline-text-2" id="text-orgheadline20">
</div><div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12">Maintain a single-source repository</h3>
<div class="outline-text-3" id="text-orgheadline12">

<figure>
<p><img src="https://www.evernote.com/l/ABdzsWIdHuJOfZ2FjTGVWuABXkRMouqkX8AB/image.png" alt="image.png">
</p>
</figure>

<ul class="org-ul">
<li>no feature branches</li>
<li>every commit on <code>origin/master</code> should be deployable</li>
<li>feature toggles<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13">Make your build self-testing</h3>
<div class="outline-text-3" id="text-orgheadline13">

<figure>
<p><img src="https://media.giphy.com/media/xcucdKgZeO69a/giphy.gif" alt="giphy.gif">
</p>
</figure>

<ul class="org-ul">
<li>repeatable</li>
<li>scalable</li>
<li>maintainable</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14">Automate the build</h3>
<div class="outline-text-3" id="text-orgheadline14">

<figure>
<p><img src="./images/futurama_June_30__2016_at_0906PM.gif" alt="futurama_June_30__2016_at_0906PM.gif">
</p>
</figure>

<ul class="org-ul">
<li>no manual steps</li>
<li>each step till release should be automated</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15">Fix broken builds immediately</h3>
<div class="outline-text-3" id="text-orgheadline15">

<figure>
<p><img src="https://www.evernote.com/l/ABeF0OIG_VpDKLhsx7v57kF87OWmbN__-QkB/image.png" alt="image.png">
</p>
</figure>

<blockquote>
<p>
Keep it green
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-3">
<h3 id="orgheadline16">Keep the build fast</h3>
<div class="outline-text-3" id="text-orgheadline16">

<figure>
<p><img src="./images/futurama_June_29__2016_at_1154PM.gif" alt="futurama_June_29__2016_at_1154PM.gif">
</p>
</figure>
</div>
</div>

<div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17">Test in a clone of the production environment</h3>
<div class="outline-text-3" id="text-orgheadline17">
<blockquote>
<p>
It works on my machine!
</p>
</blockquote>

<ul class="org-ul">
<li>same platform</li>
<li>smoke test your deployments</li>
<li>replica prod data if possible</li>
<li>dockerize everything if you can</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18">Make it easy for anyone to get the latest executable</h3>
<div class="outline-text-3" id="text-orgheadline18">

<figure>
<p><img src="https://www.evernote.com/l/ABevhNc9M9VGEbMFB9JgqIHF9JsU3OHtenkB/image.png" alt="image.png">
</p>
</figure>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19">Automate deployment</h3>
<div class="outline-text-3" id="text-orgheadline19">

<figure>
<p><img src="./images/futurama_June_10__2016_at_1101PM.gif" alt="futurama_June_10__2016_at_1101PM.gif">
</p>
</figure>

<ul class="org-ul">
<li>every success build should be able to automate deploy</li>
<li>every build should be able to rollback instantly<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup></li>
<li>0 downtime deployment</li>
<li>automate data migration</li>
<li>Only build packages once</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline23" class="outline-2">
<h2 id="orgheadline23">Pipeline</h2>
<div class="outline-text-2" id="text-orgheadline23">
</div><div id="outline-container-orgheadline21" class="outline-3">
<h3 id="orgheadline21">Journey from code to product</h3>
<div class="outline-text-3" id="text-orgheadline21">

<figure>
<p><img src="https://www.evernote.com/l/ABeRk2yi3kFFV4mFxn1K-vOBbNhLOoFSqa8B/image.jpg" alt="image.jpg">
</p>
</figure>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-3">
<h3 id="orgheadline22">Pipeline as Code</h3>
<div class="outline-text-3" id="text-orgheadline22">

<figure>
<p><img src="https://github.com/drone/brand/raw/master/screenshots/screenshot_build_success.png" alt="screenshot_build_success.png">
</p>
</figure>

<div class="org-src-container">

<pre class="src src-yaml">pipeline:
  backend:
    image: golang
    commands:
      - go get
      - go build
      - go test

  frontend:
    image: node:6
    commands:
      - npm install
      - npm test

  publish:
    image: plugins/docker
    repo: octocat/hello-world
    tags: [ 1, 1.1, latest ]
    registry: index.docker.io

  notify:
    image: plugins/slack
    channel: developers
    username: drone
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline24" class="outline-2">
<h2 id="orgheadline24">QA in Production<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup></h2>
<div class="outline-text-2" id="text-orgheadline24">

<figure>
<p><img src="https://martinfowler.com/articles/qa-in-production/qa-in-prod.png" alt="qa-in-prod.png">
</p>
</figure>

<ul class="org-ul">
<li>Gathering production data
<ul class="org-ul">
<li>Critical success indicators</li>
<li>Logging</li>
<li>Metrics</li>
</ul></li>

<li>Learning from production data

<ul class="org-ul">
<li>Alerting</li>
<li>Dashboards</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline25" class="outline-2">
<h2 id="orgheadline25">Popular CI tools</h2>
<div class="outline-text-2" id="text-orgheadline25">
<p>
<img src="https://user-images.githubusercontent.com/7321362/32575895-ea563032-c49a-11e7-9581-e05ec882658b.png" alt="32575895-ea563032-c49a-11e7-9581-e05ec882658b.png"><sup><a id="fnr.7" class="footref" href="#fn.7">7</a></sup>
</p>
</div>
</div>

<div id="outline-container-orgheadline26" class="outline-2">
<h2 id="orgheadline26">Homework</h2>
<div class="outline-text-2" id="text-orgheadline26">
<ul class="org-ul">
<li><a href="http://13.124.239.156:8153/go/tab/pipeline/history/invincible">Try gocd</a>!</li>

<li><a href="https://www.gocd.org/help/">Setup your own gocd</a></li>
</ul>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
<a href="https://continuousdelivery.com/">https://continuousdelivery.com/</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
<a href="https://www.martinfowler.com/articles/continuousIntegration.html">https://www.martinfowler.com/articles/continuousIntegration.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
<a href="https://resources.codeship.com/hubfs/Codeship_Why_Continuous_Integration_is_Important.pdf?t=1510790079206">https://resources.codeship.com/hubfs/Codeship_Why_Continuous_Integration_is_Important.pdf?t=1510790079206</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
<a href="https://martinfowler.com/bliki/FeatureToggle.html">https://martinfowler.com/bliki/FeatureToggle.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
<a href="https://martinfowler.com/bliki/BlueGreenDeployment.html">https://martinfowler.com/bliki/BlueGreenDeployment.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
<a href="https://martinfowler.com/articles/qa-in-production.html">https://martinfowler.com/articles/qa-in-production.html</a>
</p></div></div>

<div class="footdef"><sup><a id="fn.7" class="footnum" href="#fnr.7">7</a></sup> <div class="footpara"><p class="footpara">
<a href="https://github.com/blog/2463-github-welcomes-all-ci-tools">https://github.com/blog/2463-github-welcomes-all-ci-tools</a>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<footer>
  <p>Author: Jichao Ouyang <a aria-label="Follow @jcouyang on GitHub" data-count-aria-label="# followers on GitHub" data-count-api="/users/jcouyang#followers" data-count-href="/jcouyang/followers" href="https://github.com/jcouyang" class="github-button">Follow @jcouyang</a></p>
  <p>Modified: 2017-11-28 Tue 02:34</p>
  <p>Generated by: <a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.5.1 (<a href="http://orgmode.org">Org</a> mode 8.3.6) x <a href="https://github.com/jcouyang/orgpress">OrgPress</a></p>
  <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.
  <input type="swiftype" class="st-default-search-input" placeholder="Search"/>
  <a class="gumroad-button" href="https://gum.co/grokking-monad">我的新书 Grokking Monad 现已发售，请自觉排队装逼</a>

  <a class="github-fork-ribbon right-bottom fixed" href="https://github.com/jcouyang/blog" title="Fork me on GitHub">Fork me on GitHub</a>
</footer>

<div id="disqus_thread"></div>
</div>
</body>
</html>
